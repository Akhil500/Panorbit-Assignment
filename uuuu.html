var users = [];
const usersMap = new Map();



//On index.html load this function will be called
function loadData(){
var xhr = new XMLHttpRequest(); //invoke a new instance of the XMLHttpRequest
xhr.onload = success; // call success function if request is successful
xhr.onerror = error; // call error function if request failed
xhr.open('GET', 'https://panorbit.in/api/users.json'); // open a GET request
xhr.send(); // send the request to the server.
}



//User contact page display should be here
function success() {
var usersData = new Map();
var data = JSON.parse(this.responseText); //parse the string to JSON
users = data.users;
console.log(users);
var out = '<div><center><b>Select an account</b></center></div> <br> ';
for(var i=0;i<users.length;i++){
usersMap.set(users[i].name, users[i]);
out = out + '<img src="'+users[i].profilepicture+'alt="profile pic" width="50" height="50">' +
'<a href="#" onclick=displayProfile(this)>'+ users[i].name + '</a><br/>';
}
document.getElementById("myDropdown").innerHTML = out;
console.log(usersMap);
}



// function to handle error
function error(err) {
console.log('Unable to retrive the users', err); //error details will be in the "err" object
}



function displayProfile(data){
console.log(data.innerHTML);
userName = data.innerHTML;
console.log('data : ', usersMap.get(userName));
var userData = usersMap.get(userName);
}